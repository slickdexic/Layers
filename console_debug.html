<!DOCTYPE html>
<html>
<head>
    <title>Console Debug for Layers Editor</title>
    <style>
        body { font-family: monospace; margin: 20px; }
        #console { 
            background: #000; 
            color: #0f0; 
            padding: 10px; 
            height: 400px; 
            overflow-y: auto; 
            border: 1px solid #ccc;
            white-space: pre-wrap;
        }
        .log { color: #0f0; }
        .error { color: #f00; }
        .warn { color: #ff0; }
    </style>
</head>
<body>
    <h1>Console Debug for Layers Editor</h1>
    <div id="console"></div>
    <p><a href="/index.php?title=File:ImageTest02.jpg&action=editlayers" target="_blank">Open Layers Editor</a></p>
    
    <script>
        const consoleDiv = document.getElementById('console');
        
        function addToConsole(message, type = 'log') {
            const timestamp = new Date().toLocaleTimeString();
            const line = `[${timestamp}] ${type.toUpperCase()}: ${message}\n`;
            consoleDiv.textContent += line;
            consoleDiv.scrollTop = consoleDiv.scrollHeight;
        }
        
        // Capture console output
        const originalLog = console.log;
        const originalError = console.error;
        const originalWarn = console.warn;
        
        console.log = function(...args) {
            addToConsole(args.join(' '), 'log');
            originalLog.apply(console, arguments);
        };
        
        console.error = function(...args) {
            addToConsole(args.join(' '), 'error');
            originalError.apply(console, arguments);
        };
        
        console.warn = function(...args) {
            addToConsole(args.join(' '), 'warn');
            originalWarn.apply(console, arguments);
        };
        
        addToConsole('Console capture initialized');
        
        // Test if we can load the ResourceLoader module
        if (window.mw && mw.loader) {
            addToConsole('MediaWiki ResourceLoader available');
            
            mw.loader.using('ext.layers.editor').done(function() {
                addToConsole('ext.layers.editor module loaded successfully');
            }).fail(function(error) {
                addToConsole(`ext.layers.editor module failed to load: ${error}`, 'error');
            });
        } else {
            addToConsole('MediaWiki ResourceLoader not available', 'warn');
        }
    </script>
</body>
</html>
