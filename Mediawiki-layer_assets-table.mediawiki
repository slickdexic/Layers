{| class="wikitable" style="float:right; margin-left:1em; width:300px;"
! colspan="2" | layer_assets table
|-
| '''Extension''' || [[Extension:Layers]]
|-
| '''Description''' || Stores saved layer asset presets that can be reused across multiple images.
|}

The '''layer_assets''' table stores reusable layer asset presets for the [[Extension:Layers|Layers]] extension. Assets are named collections of layer data that users can save and apply to multiple images.

== Table Structure ==

{| class="wikitable"
! Column !! Type !! Nullable !! Default !! Description
|-
| <code>la_id</code> || int unsigned || No || Auto-increment || Primary key, unique identifier
|-
| <code>la_title</code> || varchar(255) binary || No || — || Unique asset title/name
|-
| <code>la_json_blob</code> || mediumblob || No || — || JSON-encoded asset data
|-
| <code>la_preview_sha1</code> || varchar(32) || Yes || NULL || SHA-1 hash of preview thumbnail (optional)
|-
| <code>la_user_id</code> || int unsigned || Yes || NULL || User ID who created the asset
|-
| <code>la_timestamp</code> || binary(14) || No || — || When the asset was created
|-
| <code>la_size</code> || int unsigned || No || 0 || Size of the JSON blob in bytes
|}

== Indexes ==

{| class="wikitable"
! Index Name !! Columns !! Type !! Purpose
|-
| PRIMARY || <code>la_id</code> || Primary || Unique row identifier
|-
| <code>la_title</code> || <code>la_title</code> || Unique || Ensures unique asset titles
|-
| <code>la_user_timestamp</code> || <code>la_user_id</code>, <code>la_timestamp</code> || Index || Query assets by user with time ordering
|-
| <code>la_size</code> || <code>la_size</code> || Index || Query assets by size
|}

== Foreign Keys ==

No database-level foreign keys are declared. Per MediaWiki convention,
referential integrity is enforced at the application level.

== How Assets Work ==

Layer assets are saved presets containing layer configurations:

# User creates layers on an image
# User saves the layer configuration as a named asset
# Asset is stored with a unique title
# User can apply the asset to other images
# Assets can be shared with other users (based on permissions)

This approach:
* '''Enables reuse''': Common annotation patterns can be saved and reapplied
* '''Saves time''': Users don't need to recreate complex layer setups
* '''Maintains consistency''': Same annotations across related images

== Size Limits ==

* <code>$wgLayersMaxBytes</code> — Maximum total layer set JSON size (default: 2MB)

== Related Tables ==

* [[Extension:Layers/layer_sets table|layer_sets]] — Stores layer data that references assets
* [[Extension:Layers/layer_set_usage table|layer_set_usage]] — Tracks article usage

== See Also ==

* [[Extension:Layers]] — Parent extension documentation
* [[Extension:Layers#Configuration]] — Configuration parameters