# v1.4.6 Release Notes

**Released:** January 5, 2026

## Features

### TIFF Image Support
- Full support for TIFF format images in the editor and viewer
- TIFF files are now correctly identified and loaded using MediaWiki thumbnail URLs
- `ImageLoader.js` detects non-web formats (TIFF, BMP, etc.) and automatically uses `Special:Redirect/file` with width parameter
- Background images render correctly for TIFF files in both editor and article pages

### SHA1 Fallback Lookup
- Added `findSetSha1()` method in `LayersDatabase.php` to find layer sets saved before InstantCommons support was added
- Handles migration scenarios where SHA1 format changed from empty to `foreign_` prefix
- API endpoints now gracefully fall back to stored SHA1 when expected SHA1 doesn't match

## Fixes

### Foreign File Delete/Rename Failing
- Fixed `ApiLayersDelete.php` and `ApiLayersRename.php` to not require local wiki page existence for foreign files
- Changed validation from `$title->exists()` to `$title->getNamespace() !== NS_FILE`
- Foreign files from InstantCommons don't have local pages, so the old check always failed

### Delete Confirmation Dialog Button Label
- Added missing `layers-delete` i18n key for the confirmation dialog button

### CanvasRenderer TIFF Support
- Enhanced `getImageFormat()` to detect TIFF files from both extension and MIME type

## Upgrade Notes

This is a patch release with no breaking changes. Simply update to the new version.

## Requirements

- **main branch (v1.4.6):** MediaWiki >= 1.44.0
- **REL1_43 branch (v1.4.6-REL1_43):** MediaWiki >= 1.43.0
